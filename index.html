<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StudySync - Manage Study Materials</title>
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts - Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700&display=swap" rel="stylesheet">
    <!-- Three.js for particle background -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        /* CSS Variables for theming */
        :root {
            --bg-color: #1a1a1a;
            --text-color: #ffffff;
            --accent-color: #b30000;
            --card-bg: #2a2a2a;
            --shadow: 0 8px 20px rgba(0, 0, 0, 0.6);
            --transition: all 0.4s ease;
            --border-radius: 12px; /* Consistent border-radius */
        }

        /* Dark Red Theme */
        [data-theme="dark-red"] {
            --bg-color: #330000;
            --text-color: #ffffff;
            --accent-color: #1a1a1a; /* Inverted accent for contrast */
            --card-bg: #4d0000;
        }

        /* Base Body Styles */
        body {
            margin: 0;
            font-family: 'Inter', sans-serif; /* Using Inter font */
            background: var(--bg-color);
            color: var(--text-color);
            transition: var(--transition);
            overflow-x: hidden; /* Prevent horizontal scroll */
            position: relative;
            min-height: 100vh; /* Ensure body takes full viewport height */
            display: flex;
            flex-direction: column;
        }

        /* Particle Background Canvas */
        #particle-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1; /* Behind other content */
            display: block; /* Ensure it's rendered */
        }

        /* Navbar Styles */
        .navbar {
            width: 250px;
            height: 100vh;
            position: fixed;
            background: var(--card-bg);
            padding: 20px;
            box-shadow: var(--shadow);
            transform: translateX(0);
            transition: var(--transition);
            z-index: 10;
            border-radius: 0 var(--border-radius) var(--border-radius) 0; /* Rounded on right side */
            display: flex;
            flex-direction: column;
            justify-content: center; /* Center nav items vertically */
        }

        .navbar.collapsed {
            transform: translateX(-100%); /* Hide navbar */
        }

        .navbar ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .navbar li {
            margin: 15px 0; /* Adjusted margin */
        }

        .navbar a {
            color: var(--text-color);
            text-decoration: none;
            font-size: 1.1em; /* Slightly smaller font */
            display: flex; /* For icon and text alignment */
            align-items: center;
            padding: 10px 15px;
            border-radius: 8px;
            transition: var(--transition);
            transform-style: preserve-3d; /* For 3D hover effect */
        }

        .navbar a i {
            margin-right: 10px;
            font-size: 1.3em;
        }

        .navbar a:hover {
            background: var(--accent-color);
            transform: scale(1.05); /* Slight scale on hover */
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4);
        }

        /* Navbar Toggle Button for Mobile */
        .navbar-toggle {
            position: fixed;
            top: 20px;
            left: 20px;
            background: var(--accent-color);
            border: none;
            padding: 10px 15px;
            border-radius: var(--border-radius);
            color: var(--text-color);
            cursor: pointer;
            z-index: 11; /* Above navbar */
            transition: var(--transition);
            display: none; /* Hidden by default on desktop */
        }

        .navbar-toggle:hover {
            transform: scale(1.1);
            box-shadow: var(--shadow);
        }

        /* Theme Toggle Button */
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--accent-color);
            border: none;
            padding: 12px;
            border-radius: 50%;
            cursor: pointer;
            transition: var(--transition);
            z-index: 10;
            color: var(--text-color); /* Icon color */
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .theme-toggle:hover {
            transform: scale(1.2) rotate(360deg);
            box-shadow: var(--shadow);
        }

        /* Search Bar */
        .search-bar {
            margin: 20px;
            padding: 10px 20px;
            background: var(--card-bg);
            border-radius: 25px; /* More rounded */
            display: flex;
            align-items: center;
            box-shadow: var(--shadow);
            transition: var(--transition);
            margin-left: 270px; /* Offset for navbar */
            max-width: calc(100% - 300px); /* Adjust max-width */
        }

        .search-bar:hover {
            transform: translateY(-3px); /* Slight lift on hover */
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.7);
        }

        .search-bar input {
            background: none;
            border: none;
            color: var(--text-color);
            width: 100%;
            padding: 8px;
            outline: none;
            font-size: 1em;
        }

        .search-bar i {
            color: var(--accent-color);
            margin-right: 10px;
        }

        /* Main Content Area */
        .content {
            margin-left: 270px; /* Offset for navbar */
            padding: 20px;
            flex-grow: 1; /* Allows content to take available space */
            z-index: 5;
        }

        /* Card Styles */
        .card {
            background: var(--card-bg);
            padding: 25px; /* Increased padding */
            border-radius: var(--border-radius);
            margin-bottom: 30px; /* Increased bottom margin */
            box-shadow: var(--shadow);
            transition: var(--transition);
            position: relative;
            overflow: hidden; /* For pseudo-element glow */
        }

        .card:hover {
            transform: translateY(-5px); /* Lift effect */
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.7);
        }

        .card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
            transform: rotate(45deg);
            opacity: 0;
            transition: opacity 0.5s ease, transform 0.5s ease;
            z-index: 0;
        }

        .card:hover::before {
            opacity: 1;
            transform: rotate(0deg);
        }

        .card > * {
            position: relative; /* Ensure content is above pseudo-element */
            z-index: 1;
        }

        .card h2, .card h3 {
            color: var(--accent-color);
            margin-top: 0;
            margin-bottom: 15px;
            font-weight: 700;
        }

        /* Digital Clock */
        #clock {
            font-size: 3em;
            font-weight: bold;
            text-align: center;
            letter-spacing: 2px;
            text-shadow: 0 0 10px var(--accent-color);
        }

        /* Calendar */
        .calendar table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .calendar th, .calendar td {
            padding: 12px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1); /* Softer border */
            transition: var(--transition);
            border-radius: 4px; /* Small rounded corners for cells */
        }

        .calendar th {
            background-color: var(--accent-color);
            color: var(--text-color);
        }

        .calendar td:hover {
            background: var(--accent-color);
            color: var(--text-color);
            transform: scale(1.05); /* Slight scale */
            cursor: pointer;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
        }

        /* To-Do List */
        .todo input[type="text"] {
            width: calc(100% - 120px); /* Adjust width for button */
            margin-right: 10px;
        }

        .todo ul {
            list-style: none;
            padding: 0;
            margin-top: 15px;
        }

        .todo li {
            background: rgba(255, 255, 255, 0.05);
            padding: 10px 15px;
            margin-bottom: 8px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: var(--transition);
        }

        .todo li:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }

        .todo li button {
            background: #dc3545; /* Red for delete */
            padding: 6px 12px;
            font-size: 0.9em;
            border-radius: 6px;
            opacity: 0.8;
        }

        .todo li button:hover {
            opacity: 1;
            transform: scale(1.05);
            box-shadow: none; /* No shadow on small buttons */
        }

        /* Form Inputs & Buttons (General) */
        input[type="text"],
        input[type="number"],
        input[type="email"],
        input[type="url"],
        input[type="tel"],
        textarea {
            padding: 12px;
            margin: 8px 0;
            background: var(--card-bg);
            border: 1px solid var(--accent-color);
            color: var(--text-color);
            border-radius: 8px;
            transition: var(--transition);
            width: calc(100% - 24px); /* Account for padding */
            box-sizing: border-box; /* Include padding in width */
        }

        input[type="file"] {
            padding: 12px 0; /* Adjust padding for file input */
            margin: 8px 0;
            color: var(--text-color);
            width: 100%;
            box-sizing: border-box;
        }

        input:focus, textarea:focus {
            border-color: var(--text-color);
            box-shadow: 0 0 10px var(--accent-color);
            background: rgba(255, 255, 255, 0.05);
        }

        button {
            background: var(--accent-color);
            border: none;
            padding: 12px 24px;
            color: var(--text-color);
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            font-size: 1em;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
        }

        button:hover {
            transform: scale(1.05); /* Slightly less dramatic for general buttons */
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.6);
            background-color: color-mix(in srgb, var(--accent-color) 90%, var(--text-color)); /* Slightly lighter on hover */
        }

        /* CGPA/GPA Converter */
        #cgpa-result {
            margin-top: 15px;
            font-size: 1.1em;
            font-weight: bold;
            color: var(--accent-color);
        }

        /* Logical Calculator */
        #calc-result {
            margin-top: 15px;
            font-size: 1.1em;
            font-weight: bold;
            color: var(--accent-color);
        }

        /* Student Information System */
        .student-info form {
            display: grid;
            grid-template-columns: 1fr; /* Single column by default */
            gap: 15px;
        }

        .student-info img {
            max-width: 150px;
            height: auto;
            border-radius: 8px;
            margin-top: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }

        #student-list .card {
            margin-top: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05); /* Lighter background for individual student cards */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }

        #student-list .card h3 {
            color: var(--text-color);
            margin-bottom: 5px;
        }

        #student-list .card p {
            margin: 5px 0;
            font-size: 0.95em;
        }

        #student-list .card a {
            color: var(--accent-color);
            text-decoration: none;
        }

        #student-list .card button {
            background: #dc3545;
            margin-top: 10px;
            padding: 8px 15px;
            font-size: 0.9em;
        }

        /* Drive Links */
        .drive-links {
            display: flex;
            flex-wrap: wrap;
            gap: 15px; /* Spacing between links */
        }

        .drive-links a {
            flex: 1 1 auto; /* Allow items to grow and shrink */
            min-width: 150px; /* Minimum width for each link */
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 15px 20px;
            background: var(--accent-color);
            color: var(--text-color);
            text-decoration: none;
            border-radius: 8px;
            transition: var(--transition);
            font-weight: bold;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
        }

        .drive-links a:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.6);
        }

        /* Transport Schedule */
        #schedule-list ul {
            list-style: none;
            padding: 0;
            margin-top: 15px;
        }

        #schedule-list li {
            background: rgba(255, 255, 255, 0.05);
            padding: 10px 15px;
            margin-bottom: 8px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: var(--transition);
        }

        #schedule-list li:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }

        #schedule-list li button {
            background: #dc3545;
            padding: 6px 12px;
            font-size: 0.9em;
            border-radius: 6px;
            opacity: 0.8;
        }

        #schedule-list li button:hover {
            opacity: 1;
            transform: scale(1.05);
            box-shadow: none;
        }

        /* Chatbot */
        #chat-output {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            height: 200px;
            overflow-y: auto;
            margin-top: 15px;
            border: 1px solid var(--accent-color);
        }

        #chat-output p {
            margin: 5px 0;
            line-height: 1.4;
        }

        #chat-output strong {
            color: var(--accent-color);
        }

        /* Footer Styles */
        .footer {
            background: var(--card-bg);
            padding: 20px;
            text-align: center;
            margin-top: auto; /* Pushes footer to the bottom */
            box-shadow: var(--shadow);
            border-radius: var(--border-radius) var(--border-radius) 0 0; /* Rounded on top side */
        }

        .footer a {
            color: var(--text-color);
            margin: 0 15px;
            font-size: 1.8em;
            transition: var(--transition);
            display: inline-block; /* For transform */
        }

        .footer a:hover {
            transform: scale(1.3) rotate(15deg);
            color: var(--accent-color);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .navbar {
                width: 100%;
                height: 100%;
                transform: translateX(-100%); /* Hidden by default */
                border-radius: 0;
                padding-top: 60px; /* Space for toggle button */
                box-sizing: border-box;
            }

            .navbar.active {
                transform: translateX(0); /* Show navbar */
            }

            .navbar-toggle {
                display: block; /* Show toggle button on mobile */
            }

            .search-bar {
                margin-left: 20px; /* Reset margin */
                max-width: calc(100% - 40px); /* Full width minus padding */
                margin-top: 70px; /* Below toggle button */
            }

            .content {
                margin-left: 0; /* Reset margin */
                padding-top: 20px; /* Ensure content starts below search bar */
            }

            .theme-toggle {
                top: 20px;
                right: 20px;
            }

            .student-info form {
                grid-template-columns: 1fr; /* Single column on small screens */
            }
        }

        @media (max-width: 480px) {
            .navbar a {
                font-size: 1em;
            }

            .search-bar input {
                font-size: 0.9em;
            }

            .card {
                padding: 15px;
            }

            .drive-links a {
                min-width: unset; /* Allow smaller width for very small screens */
                flex: 1 1 100%; /* Stack vertically */
            }

            #clock {
                font-size: 2.5em;
            }
        }
    </style>
</head>
<body>
    <!-- Canvas for Three.js Particle Background -->
    <canvas id="particle-bg"></canvas>

    <!-- Navbar Toggle Button (for mobile) -->
    <button class="navbar-toggle" onclick="toggleNavbar()">
        <i class="fas fa-bars"></i>
    </button>

    <!-- Theme Toggle Button -->
    <button class="theme-toggle" onclick="toggleTheme()">
        <i class="fas fa-moon"></i>
    </button>

    <!-- Sidebar Navigation -->
    <div class="navbar" id="navbar">
        <ul>
            <li><a href="#home"><i class="fas fa-home"></i> Home</a></li>
            <li><a href="#resources"><i class="fas fa-book"></i> Resources</a></li>
            <li><a href="#cgpa"><i class="fas fa-calculator"></i> CGPA Converter</a></li>
            <li><a href="#calculator"><i class="fas fa-square-root-alt"></i> Calculator</a></li>
            <li><a href="#students"><i class="fas fa-user-graduate"></i> Student Info</a></li>
            <li><a href="#transport"><i class="fas fa-bus"></i> Transport Schedule</a></li>
            <li><a href="#chat"><i class="fas fa-comments"></i> Chat & Feedback</a></li>
        </ul>
    </div>

    <!-- Search Bar -->
    <div class="search-bar">
        <i class="fas fa-search"></i>
        <input type="text" id="search" placeholder="Search study materials...">
    </div>

    <!-- Main Content Area -->
    <div class="content">
        <!-- Digital Clock Section -->
        <div id="home" class="card clock">
            <h2>Digital Clock</h2>
            <div id="clock">00:00:00</div>
        </div>

        <!-- Study Resources Section -->
        <div id="resources" class="card drive-links">
            <h2>Study Resources</h2>
            <a href=" https://drive.google.com/drive/folders/10bIQkDJgJB4onZY8WjBPt7I5b_RTuCGl?usp=drive_link " target="_blank">1st_Semester</a>
            <a href="https://drive.google.com/drive/folders/1BvNe57fF9I26CEEK8dLnDO_GuxLi05D0?usp=drive_link" target="_blank">2nd_Semester</a>
            <a href="https://drive.google.com/drive/folders/1C04iTCiwpgm9rF6b0dsUkeS6HOJ86OUU?usp=drive_link" target="_blank">3rd_Semester</a>
            <a href="https://drive.google.com/drive/folders/1C2K6fytqy2YubYA2LP1eZQoEWqgPO-Ma?usp=drive_link" target="_blank">4th_Semester</a>
            <a href="https://drive.google.com/drive/folders/1C3JcpkKGeTs_a-Kc6dOXZzOwvSJwX33r?usp=drive_link" target="_blank">5th_Semester</a>
            <a href="https://drive.google.com/drive/folders/1C3bXhsefU1nFQ6v1--q6_zpwfJGZ1Wez?usp=drive_link" target="_blank">6th_Semester</a>
            <a href="https://drive.google.com/drive/folders/1C8-1s68fFl8pGDTRMWxYSGXUA65o9zLq?usp=drive_link" target="_blank">7th_Semester</a>
            <a href="https://drive.google.com/drive/folders/1C8_yA1ruJj3AnFQGr1NF1MgpzWMHBFjL?usp=drive_link" target="_blank">8th_Semester</a>
            <a href="https://drive.google.com/drive/folders/1CC52_SeS5XMrzzHrVcsrZWkDve3-cSPb?usp=drive_link" target="_blank">Thesis</a>
            <a href="https://drive.google.com/drive/folders/1YTn9GOdZQBCuZ4bxprZfG1j-5gd2xlcA?usp=drive_link" target="_blank">Extra</a>
            <a href="https://drive.google.com/drive/folders/1oPDgvFlupSkAUzFv_ByEE3xYzYjVzAKN?usp=drive_link" target="_blank">Viva</a>
        </div>

        <!-- Calendar and To-Do List Section -->
        <div class="card calendar">
            <h2>Calendar</h2>
            <div id="calendar"></div>
            <div class="todo">
                <h3>To-Do List</h3>
                <input type="text" id="todo-input" placeholder="Add a task...">
                <button onclick="addTodo()">Add Task</button>
                <ul id="todo-list"></ul>
            </div>
        </div>

        <!-- CGPA/GPA Converter Section -->
        <div id="cgpa" class="card cgpa-converter">
            <h2>CGPA/GPA Converter</h2>
            <input type="number" id="grade" placeholder="Enter grade (0-100)">
            <button onclick="convertGrade()">Convert</button>
            <div id="cgpa-result"></div>
        </div>

        <!-- Logical Calculator Section -->
        <div id="calculator" class="card calculator">
            <h2>Logical Calculator</h2>
            <input type="text" id="calc-input" placeholder="Enter expression (e.g., 2 + 2 * 3)">
            <button onclick="calculate()">Calculate</button>
            <div id="calc-result"></div>
        </div>

        <!-- Student Information System Section -->
        <div id="students" class="card student-info">
            <h2>Student Information System</h2>
            <form id="student-form">
                <input type="text" name="name" placeholder="Name" required>
                <input type="text" name="id" placeholder="ID" required>
                <input type="number" name="cgpa" placeholder="CGPA" step="0.01">
                <input type="number" name="gpa" placeholder="GPA" step="0.01">
                <input type="email" name="gmail" placeholder="Gmail">
                <input type="url" name="github" placeholder="GitHub URL">
                <input type="tel" name="whatsapp" placeholder="WhatsApp Number">
                <input type="tel" name="mobile" placeholder="Mobile Number">
                <input type="text" name="permanent" placeholder="Permanent Address">
                <input type="text" name="temporary" placeholder="Temporary Address">
                <input type="text" name="blood" placeholder="Blood Group">
                <input type="url" name="facebook" placeholder="Facebook URL">
                <label for="student-image-upload" style="display: block; margin-top: 10px;">Upload Image:</label>
                <input type="file" id="student-image-upload" name="image" accept="image/*">
                <button type="submit">Add Student</button>
            </form>
            <div id="student-list"></div>
        </div>

        <!-- Transport Schedule Section -->
        <div id="transport" class="card transport-schedule">
            <h2>Transport Schedule</h2>
            <input type="file" id="schedule-file" accept=".json,.txt">
            <button onclick="uploadSchedule()">Upload Schedule</button>
            <div id="schedule-list"></div>
        </div>

        <!-- Feedback & Chat Section -->
        <div id="chat" class="card chatbot">
            <h2>Feedback & Chat</h2>
            <textarea id="chat-input" placeholder="Type your message..."></textarea>
            <button onclick="sendMessage()">Send</button>
            <div id="chat-output"></div>
        </div>
    </div>

    <!-- Footer -->
    <div class="footer">
        <a href="https://facebook.com" target="_blank"><i class="fab fa-facebook"></i></a>
        <a href="https://twitter.com" target="_blank"><i class="fab fa-twitter"></i></a>
        <a href="https://linkedin.com" target="_blank"><i class="fab fa-linkedin"></i></a>
        <a href="https://github.com" target="_blank"><i class="fab fa-github"></i></a>
    </div>

    <script>
        // --- Three.js Particle Background ---
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('particle-bg'), alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        camera.position.z = 50;

        const particlesGeometry = new THREE.BufferGeometry();
        const particleCount = 1000;
        const posArray = new Float32Array(particleCount * 3); // x, y, z for each particle

        // Populate particle positions randomly
        for (let i = 0; i < particleCount * 3; i++) {
            posArray[i] = (Math.random() - 0.5) * 100; // Random position between -50 and 50
        }
        particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));

        // Create particle material (white points)
        const particlesMaterial = new THREE.PointsMaterial({
            color: 0xffffff,
            size: 0.2, // Size of each particle
            transparent: true,
            opacity: 0.7
        });

        const particleSystem = new THREE.Points(particlesGeometry, particlesMaterial);
        scene.add(particleSystem);

        // Animation loop for particles
        function animateParticles() {
            requestAnimationFrame(animateParticles); // Request next frame
            particleSystem.rotation.y += 0.0005; // Rotate particles slowly
            particleSystem.rotation.x += 0.0002;
            renderer.render(scene, camera); // Render the scene
        }

        // Start particle animation after window loads
        window.onload = function() {
            animateParticles();
        };

        // Handle window resize for Three.js canvas
        window.addEventListener('resize', () => {
            renderer.setSize(window.innerWidth, window.innerHeight);
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
        });

        // --- Theme Toggle ---
        function toggleTheme() {
            const body = document.body;
            // Toggle between 'dark-red' and default (no data-theme attribute, which defaults to root variables)
            body.dataset.theme = body.dataset.theme === 'dark-red' ? '' : 'dark-red';
        }

        // --- Navbar Toggle for Mobile ---
        function toggleNavbar() {
            const navbar = document.getElementById('navbar');
            navbar.classList.toggle('active'); // Toggles 'active' class for showing/hiding
        }

        // --- Digital Clock ---
        function updateClock() {
            const clockElement = document.getElementById('clock');
            const now = new Date();
            // Format time as HH:MM:SS
            clockElement.textContent = now.toLocaleTimeString('en-US', {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: false // Use 24-hour format
            });
        }
        setInterval(updateClock, 1000); // Update every second
        updateClock(); // Initial call to display immediately

        // --- Calendar ---
        function generateCalendar() {
            const calendarElement = document.getElementById('calendar');
            const now = new Date();
            const year = now.getFullYear();
            const month = now.getMonth(); // 0-indexed month

            // Get first day of the month (0 = Sunday, 6 = Saturday)
            const firstDay = new Date(year, month, 1).getDay();
            // Get number of days in the current month
            const daysInMonth = new Date(year, month + 1, 0).getDate();

            let html = `
                <div style="text-align: center; font-size: 1.2em; margin-bottom: 15px;">
                    ${new Date(year, month).toLocaleString('en-US', { month: 'long', year: 'numeric' })}
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Sun</th><th>Mon</th><th>Tue</th><th>Wed</th><th>Thu</th><th>Fri</th><th>Sat</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
            `;

            // Add empty cells for days before the 1st of the month
            for (let i = 0; i < firstDay; i++) {
                html += '<td></td>';
            }

            // Add days of the month
            for (let day = 1; day <= daysInMonth; day++) {
                // Start a new row every 7 days (Saturday is the 7th day)
                if ((day + firstDay - 1) % 7 === 0 && day !== 1) {
                    html += '</tr><tr>';
                }
                html += `<td>${day}</td>`;
            }
            html += '</tr></tbody></table>';
            calendarElement.innerHTML = html;
        }
        generateCalendar();

        // --- To-Do List ---
        let todos = []; // Array to store to-do items

        function addTodo() {
            const input = document.getElementById('todo-input');
            const taskText = input.value.trim();
            if (taskText) {
                todos.push(taskText); // Add new task
                input.value = ''; // Clear input field
                renderTodos(); // Re-render the list
            }
        }

        function deleteTodo(index) {
            todos.splice(index, 1); // Remove task at specific index
            renderTodos(); // Re-render the list
        }

        function renderTodos() {
            const list = document.getElementById('todo-list');
            list.innerHTML = ''; // Clear current list

            if (todos.length === 0) {
                list.innerHTML = '<li style="text-align: center; opacity: 0.7;">No tasks added yet.</li>';
                return;
            }

            todos.forEach((todo, index) => {
                const li = document.createElement('li');
                li.innerHTML = `
                    <span>${todo}</span>
                    <button onclick="deleteTodo(${index})">Delete</button>
                `;
                list.appendChild(li);
            });
        }
        renderTodos(); // Initial render for empty list message

        // --- CGPA/GPA Converter ---
        function convertGrade() {
            const gradeInput = document.getElementById('grade');
            const resultElement = document.getElementById('cgpa-result');
            const grade = parseFloat(gradeInput.value);

            if (isNaN(grade) || grade < 0 || grade > 100) {
                resultElement.textContent = 'Please enter a valid grade (0-100).';
                resultElement.style.color = '#dc3545'; // Error color
                return;
            }

            let gpa, letter;
            if (grade >= 80) { gpa = 4.0; letter = 'A+'; }
            else if (grade >= 75) { gpa = 3.75; letter = 'A'; }
            else if (grade >= 70) { gpa = 3.5; letter = 'A-'; }
            else if (grade >= 65) { gpa = 3.25; letter = 'B+'; }
            else if (grade >= 60) { gpa = 3.0; letter = 'B'; }
            else if (grade >= 55) { gpa = 2.75; letter = 'B-'; }
            else if (grade >= 50) { gpa = 2.5; letter = 'C+'; }
            else if (grade >= 45) { gpa = 2.25; letter = 'C'; }
            else if (grade >= 40) { gpa = 2.0; letter = 'D'; }
            else { gpa = 0.0; letter = 'F'; }

            resultElement.textContent = `GPA: ${gpa.toFixed(2)}, Letter Grade: ${letter}`;
            resultElement.style.color = 'var(--accent-color)'; // Reset to accent color
        }

        // --- Logical Calculator ---
        function calculate() {
            const inputElement = document.getElementById('calc-input');
            const resultElement = document.getElementById('calc-result');
            const expression = inputElement.value;

            try {
                // WARNING: Using eval() can be a security risk if the input is not controlled.
                // For a simple client-side calculator with trusted input, it might be acceptable,
                // but for production apps, consider a safer math expression parser library.
                const result = eval(expression);
                if (isNaN(result) || !isFinite(result)) {
                    throw new Error('Invalid calculation result.');
                }
                resultElement.textContent = `Result: ${result}`;
                resultElement.style.color = 'var(--accent-color)';
            } catch (error) {
                resultElement.textContent = 'Error: Invalid expression or calculation.';
                resultElement.style.color = '#dc3545'; // Error color
                console.error("Calculator error:", error);
            }
        }

        // --- Student Information System ---
        let students = []; // Array to store student objects

        document.getElementById('student-form').addEventListener('submit', (e) => {
            e.preventDefault(); // Prevent default form submission

            const formData = new FormData(e.target);
            const student = {};
            formData.forEach((value, key) => {
                if (key !== 'image') { // Exclude file input from direct assignment
                    student[key] = value;
                }
            });

            const imageFile = formData.get('image');
            if (imageFile && imageFile.name) {
                const reader = new FileReader();
                reader.onload = () => {
                    student.imageData = reader.result; // Store base64 image data
                    students.push(student);
                    renderStudents();
                };
                reader.readAsDataURL(imageFile); // Read file as base64
            } else {
                students.push(student);
                renderStudents();
            }
            e.target.reset(); // Clear form fields
        });

        function deleteStudent(index) {
            students.splice(index, 1); // Remove student at specific index
            renderStudents(); // Re-render the list
        }

        function renderStudents() {
            const list = document.getElementById('student-list');
            list.innerHTML = ''; // Clear current list

            if (students.length === 0) {
                list.innerHTML = '<p style="text-align: center; opacity: 0.7;">No student information added yet.</p>';
                return;
            }

            students.forEach((student, index) => {
                const div = document.createElement('div');
                div.className = 'card student-item'; // Add a class for specific styling if needed
                div.innerHTML = `
                    <h3>${student.name || 'N/A'} (${student.id || 'N/A'})</h3>
                    ${student.imageData ? `<img src="${student.imageData}" alt="Student Image">` : ''}
                    <p><strong>CGPA:</strong> ${student.cgpa || 'N/A'}, <strong>GPA:</strong> ${student.gpa || 'N/A'}</p>
                    <p><strong>Email:</strong> ${student.gmail || 'N/A'}</p>
                    <p><strong>GitHub:</strong> <a href="${student.github || '#'}" target="_blank">${student.github || 'N/A'}</a></p>
                    <p><strong>WhatsApp:</strong> ${student.whatsapp || 'N/A'}</p>
                    <p><strong>Mobile:</strong> ${student.mobile || 'N/A'}</p>
                    <p><strong>Permanent Address:</strong> ${student.permanent || 'N/A'}</p>
                    <p><strong>Temporary Address:</strong> ${student.temporary || 'N/A'}</p>
                    <p><strong>Blood Group:</strong> ${student.blood || 'N/A'}</p>
                    <p><strong>Facebook:</strong> <a href="${student.facebook || '#'}" target="_blank">${student.facebook || 'N/A'}</a></p>
                    <button onclick="deleteStudent(${index})">Delete</button>
                `;
                list.appendChild(div);
            });
        }
        renderStudents(); // Initial render for empty list message

        // --- Transport Schedule ---
        let schedules = []; // Array to store schedule items

        function uploadSchedule() {
            const fileInput = document.getElementById('schedule-file');
            const file = fileInput.files[0];

            if (!file) {
                console.log("No file selected.");
                return;
            }

            const reader = new FileReader();
            reader.onload = (e) => {
                try {
                    // Attempt to parse as JSON
                    const data = JSON.parse(e.target.result);
                    schedules = Array.isArray(data) ? data : [data]; // Ensure it's an array
                } catch (jsonError) {
                    // If JSON parsing fails, treat as plain text, split by newlines
                    console.warn("Could not parse file as JSON, treating as plain text.", jsonError);
                    schedules = e.target.result.split('\n').filter(line => line.trim() !== '').map(line => ({ text: line.trim() }));
                }
                renderSchedules();
                fileInput.value = ''; // Clear file input
            };

            // Read the file as text regardless of type, then attempt JSON parsing
            reader.readAsText(file);
        }

        function deleteSchedule(index) {
            schedules.splice(index, 1);
            renderSchedules();
        }

        function renderSchedules() {
            const list = document.getElementById('schedule-list');
            list.innerHTML = ''; // Clear current list

            if (schedules.length === 0) {
                list.innerHTML = '<p style="text-align: center; opacity: 0.7;">No transport schedules uploaded yet.</p>';
                return;
            }

            schedules.forEach((schedule, index) => {
                const li = document.createElement('li');
                // Display based on whether it's a structured object or plain text
                const displayText = schedule.text || `Route: ${schedule.route || 'N/A'}, Time: ${schedule.time || 'N/A'}, Date: ${schedule.date || 'N/A'}`;
                li.innerHTML = `
                    <span>${displayText}</span>
                    <button onclick="deleteSchedule(${index})">Delete</button>
                `;
                list.appendChild(li);
            });
        }
        renderSchedules(); // Initial render for empty list message

        // --- Chatbot (Simple Echo/Predefined Responses) ---
        function sendMessage() {
            const input = document.getElementById('chat-input');
            const output = document.getElementById('chat-output');
            const message = input.value.trim();

            if (!message) return;

            // Display user's message
            output.innerHTML += `<p><strong>You:</strong> ${message}</p>`;
            input.value = ''; // Clear input

            // Scroll to bottom of chat output
            output.scrollTop = output.scrollHeight;

            // Simple predefined bot responses
            const responses = [
                'Thanks for your feedback! We appreciate it.',
                'Iâ€™ll pass that along to the development team!',
                'Great suggestion, noted for future improvements!',
                'Let me think about that... I will process your request shortly.',
                'Awesome, thanks for sharing your thoughts!'
            ];
            const botReply = responses[Math.floor(Math.random() * responses.length)];

            // Simulate bot typing delay
            setTimeout(() => {
                output.innerHTML += `<p><strong>Bot:</strong> ${botReply}</p>`;
                output.scrollTop = output.scrollHeight; // Scroll again after bot reply
            }, 800); // 0.8 second delay
        }

        // --- Search Functionality ---
        document.getElementById('search').addEventListener('input', (e) => {
            const query = e.target.value.toLowerCase();
            // Select all cards in the content area
            document.querySelectorAll('.content .card').forEach(card => {
                // Check if card's text content includes the query
                if (card.textContent.toLowerCase().includes(query)) {
                    card.style.display = 'block'; // Show card
                } else {
                    card.style.display = 'none'; // Hide card
                }
            });
        });

        // --- Smooth Scrolling for Navbar Links ---
        document.querySelectorAll('.navbar a').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault(); // Prevent default jump

                const targetId = this.getAttribute('href').substring(1);
                const targetElement = document.getElementById(targetId);

                if (targetElement) {
                    // Close navbar on mobile after clicking a link
                    const navbar = document.getElementById('navbar');
                    if (navbar.classList.contains('active')) {
                        navbar.classList.remove('active');
                    }

                    // Scroll smoothly to the target element
                    targetElement.scrollIntoView({
                        behavior: 'smooth'
                    });
                }
            });
        });
    </script>
</body>
</html>
